<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head">
    <title>Auditoria Interna</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link th:href="@{/css/bootstrap/bootstrap.css}" rel="stylesheet"/>
    <link th:href="@{/css/web/backoffice/lider/inicio.css}" rel="stylesheet"/>
    <link th:href="@{/css/datatable/datatables.css}" rel="stylesheet"/>

    <script th:src="@{/js/bootstrap/bootstrap.bundle.js}" type="text/javascript"></script>
    <script th:src="@{/js/jquery/jquery.js}" type="text/javascript"></script>
    <script th:src="@{/js/datatable/datatables.js}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!--No quitar por el MOMENTO (HUGO)-->
    <!--link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css"-->
    <!--script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script-->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-8lSO2IY/rf4iLeKXO25u/0gFtbslGck1ObJQzryL7HzsUM9kcwB+XahTG+Pxg9C8oP7F9q3C7VITuMOHEiXGAA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Auditoria Interna</title>
    <style>
        .dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content ul {
    list-style-type: none;
    padding: 0;
}

.dropdown-content li {
    padding: 10px;
}

.dropdown:hover .dropdown-content {
    display: block;
}
        .user-info {
    display: flex;
    align-items: center;
}

.user-icon {
    margin-right: 10px;
}

.user-details {
    display: flex;
    flex-direction: column;
}

.user-name {
    font-weight: bold;
}

.user-description {
    font-size: 0.9em;
}
        .user-item {
    width: 350px; /* Puedes ajustar el ancho según tus necesidades */
    border-bottom: 1px solid #ccc; /* Línea de separación */
    transition: box-shadow 0.3s; /* Transición para el sombreado */
}
        .user-item:hover {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); /* Sombreado al pasar el cursor */
}

        .notification-container {
    position: relative;
}

.notification-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: red;
    color: white;
    border-radius: 50%;
    padding: 4px 8px;
    font-size: 10px;
    font-weight: bold;
}
.notification-container .uil-bell {
    font-size: 24px; /* Tamaño del icono de la campana */
}
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
    var dropdown = document.getElementById("notificationDropdown");
    var dropdownContent = document.getElementById("notificationContent");

    dropdown.onclick = function() {
        if (dropdownContent.style.display === "block") {
            dropdownContent.style.display = "none";
        } else {
            dropdownContent.style.display = "block";
        }
    }
});
    </script>
</head>
<!--Navbar-->
<body>
<nav class="navbar navbar-expand-lg fixed-top" th:fragment="menu">
    <div class="container-fluid">
        <a class="navbar-brand me-auto" href="#">Covisian</a>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title"
                    id="offcanvasNavbarLabel">Covisian</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-center flex-grow-1 pe-3">
                    <li class="nav-item">
                        <a class="nav-link mx-lg-2 active" aria-current="page"
                           th:href="@{/lider/inicio-page}">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-lg-2" th:href="@{/lider/empleados/}+${session.user.area}">Empleados</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mx-lg-2"
                           th:href="@{/lider/evaluaciones/}+${session.user.area}">Evaluaciones</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                           aria-expanded="false">
                            Usuario
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" th:href="@{/user/detail}">Perfil</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <div class="notification-container">
                                <a class="nav-link mx-lg-2" href="#">
                                    <i class="uil uil-bell"></i>
                                    <span class="notification-badge" th:text="${session.cantnotification}"></span>
                                </a>
                            </div>
                            <div class="dropdown-content" id="notificationContent">
                                <ul>
                                    <li class="nav-item user-item" th:each="evaluacion : ${session.notification}" th:if="${session.notification != null}">
                                        <div class="user-info">
                                            <div class="user-icon">
                                                <i class="uil uil-user"></i>
                                            </div>
                                            <div class="user-details">
                                                <div class="user-name"><span th:text="${evaluacion.auditor.nombreAuditor} + ' ' + ${evaluacion.auditor.apellidoAuditor}"></span></div>
                                                <div class="user-description"><span th:text="'Acaba de evaluar al empleado ' + ${evaluacion.empleado.nombreEmpleado} + ' ' + ${evaluacion.empleado.apellidoEmpleado} + ' con DNI ' + ${evaluacion.empleado.dniEmpleado}"></span></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item user-item" th:if="${session.notification.empty}">
                                        <div class="user-info">
                                            <div class="user-icon">

                                            </div>
                                            <div class="user-details">
                                                <div class="user-description">Sin Notificaciones</div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <a th:href="@{/logout}" class="logout-button">Logout</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    <script th:src="@{/js/sweetalert2/sweetalert2.all.min.js}" type="text/javascript"></script>

    <script>
        document.querySelector('.logout-button').addEventListener('click', function(event) {
            event.preventDefault();
            Swal.fire({
                title: '¿Estás seguro?',
                text: "¡Vas a cerrar la sesión!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: '¡Sí, cerrar sesión!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/logout';
                }
            })
        });
    </script>
</nav>



</body>
</html>
