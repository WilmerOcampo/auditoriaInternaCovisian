<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="layoutlider::head">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    .border-blue {
        border: 1px solid blue !important; /* !important asegura que esta regla tenga prioridad */
    }

    .dash-content {
        display: flex;
        justify-content: center;
        align-items: center;
        align-content: center;
        height: calc(100vh - 80px); /* Altura igual al 100% del viewport menos el margen superior */
        text-align: center;
        max-width: 40%; /* Definir el ancho máximo */
        margin: 0 auto; /* Centrar horizontalmente */
    }
    .col-md-4 span {
        text-align: center; /* Centrar el texto horizontalmente */
    }
</style>
<body>
<nav th:replace="layout::menu" ></nav>
<section class="dashboard">
    <div class="dash-content">
        <div class="overview">
            <form class="row g-3" style="align-items: center">
                <div class="border mb-3 p-3" style="align-items: center">
                    <h5 class="card-title"><span id="nombreCompleto">Bienvenido!!!, [[${session.user.nombreCompleto}]]</span></h5>
                    <div class="row" style="justify-content: center">
                        <div class="col-md-4">
                            <div class="mb-3 mt-3" >
                                <h6>DNI</h6>
                                <span id="spdni" th:text="${session.user.dni}"></span>
                            </div>
                            <div class="mb-3">
                                <h6>Nombre</h6>
                                <span id="spnombre" th:text="${session.user.nombre}"></span>
                            </div>
                            <div class="mb-3">
                                <h6>Apellido</h6>
                                <span id="spapellido" th:text="${session.user.apellido}"></span>
                            </div>
                            <div class="mb-3">
                                <h6>Area</h6>
                                <span id="sparea" th:text="${session.user.area}"></span>
                            </div>
                            <div class="mb-3">
                                <h6>Usuario</h6>
                                <span id="spusername" th:text="${session.user.username}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3 justify-content-center align-items-center">
                        <div class="col-md-4 text-center justify-content-center align-items-center">
                            <button id="editarBtn" type="button" class="btn btn-success mx-auto align-items-center justify-content-center">Editar</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal fade modal-xl" id="modalUsuario" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="margin: 0">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ejemplo">Datos de Cuenta</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="col-md-4">
                        <div class="form-floating mb-3 mt-3">
                            <input type="number" class="form-control" name="dni" id="dni"
                                   th:value="${session.user.dni}" readonly>
                            <label for="dni">Documento Nacional de Identidad</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" name="nombre" id="nombre"
                                   th:value="${session.user.nombre}">
                            <label for="nombre">Nombre</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" name="apellido" id="apellido"
                                   th:value="${session.user.apellido}">
                            <label for="apellido">Apellido</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="area"
                                   th:value="${session.user.area}" readonly>
                            <label for="area">Area</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="username"
                                   th:value="${session.user.username}" readonly>
                            <label for="username">Username</label>
                        </div>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="form-floating mb-3">
                                    <input type="password" value="password" class="form-control"  readonly>
                                    <label for="username">Contraseña</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <a class="btn btn-info" id="cambiarContraseña">Cambiar Contraseña</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="guardarBtn" type="button" class="btn btn-success">Guardar</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{/js/web/backoffice/lider/lider.js}" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $("#editarBtn").click(function () {
                $('#modalUsuario').modal('show');
                $("#nombre, #apellido").addClass("border-blue");
            });
            $("#cambiarContraseña").click(function (event) {
                $('#miModal').modal('show');
            });
            $("#guardarBtn").click(function (event) {
                var modalUsuario = $('#modalUsuario');
                var dni = $('#dni').val();
                var nombre = $('#nombre').val();
                var apellido = $('#apellido').val();
                $.ajax({
                    url : '/user/actualizar',
                    type : 'POST',
                    data : {
                        dni: dni,
                        nombre: nombre,
                        apellido: apellido
                    },
                    dataType: 'json',
                    success: function(response){
                        $('#modalUsuario').modal('hide')
                    }
                });
                $('#modalUsuario').modal('hide')
            });

        });
    </script>
</section>
</body>
</html>